<?php
    require("config.php");
    require("db.php");
    require "functions/all.php";

    // var_dump($_GET);
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ 'id' –≤ GET-–º–∞—Å—Å–∏–≤–µ, –∏ —ç—Ç–æ —á–∏—Å–ª–æ
    if (isset($_GET["id"]) && is_numeric($_GET["id"])) {
         $post = R::load("posts", $_GET["id"]);

        // –ï—Å–ª–∏ —Ç–∞–∫–æ–π –ø–æ—Å—Ç —Å 'id' –µ—Å—Ç—å, –Ω–æ –ø—É—Å—Ç–æ–π - –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        if ($post['id'] == 0) {
            header("Location: " . HOST);
            exit;
        }
    } else {
        // –ï—Å–ª–∏ –Ω–µ—Ç, –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        header("Location: " . HOST);
        exit;
    }


    include(ROOT . "templates/head.tpl");
    include(ROOT . "templates/header.tpl");
?>

<main class="page-content">
    <div class="container container-narrow">
        <div class="posts-wrapper">
            <article class="post">
                <div class="post__date"><?php echo date('d.m.Y', strtotime($post['created_at']))  ?></div>

                <?php if(!empty($post['title'])): ?>
                    <h1 class="post__title"><?= $post['title'] ?></h1>
                <?php endif;?>

                <?php if(!empty($post['cover_name'])): ?>
                    <div class="post__img-wrapper">
                        <img class="post__img no-picture" src="<?=HOST?>/data/covers/<?= $post['cover_name'] ?>" alt="Post image">
                    </div>
                <?php endif;?>
                <!-- <div class="post__img-wrapper">
                    <picture>
                    <source srcset="<?=HOST?>/assets/img/pictures/img1.avif" type="image/avif"></source>
                    <source srcset="<?=HOST?>/assets/img/pictures/img1.webp" type="image/webp"></source>
                    <img class="post__img " src="<?=HOST?>/assets/img/pictures/img1.jpg" alt="Post image">
                    </picture>
                </div> -->

                <?php if(!empty($post['content'])): ?>
                    <div class="post__text post__text--full">
                        <p>
                            <?= $post['content']?>
                        </p>

                        <h2>–î–æ–º —É –æ–∑–µ—Ä–∞ ‚Äî –º–µ—á—Ç–∞ –æ–± —É–µ–¥–∏–Ω–µ–Ω–∏–∏</h2>

                        <p>–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤ –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–º –¥–æ–º–µ —É —Å–∞–º–æ–≥–æ –æ–∑–µ—Ä–∞. –ó–∞ –æ–∫–Ω–æ–º —Ç–∏—à–∏–Ω–∞, —Ç–æ–ª—å–∫–æ –ª–µ–≥–∫–∏–µ –≤–æ–ª–Ω—ã –∫–∞—Å–∞—é—Ç—Å—è –±–µ—Ä–µ–≥–∞, –∞ –≤ –≤–æ–∑–¥—É—Ö–µ –≤–∏—Ç–∞–µ—Ç —Å–≤–µ–∂–µ—Å—Ç—å —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ª–µ—Å–∞. –í—ã–π—Ç–∏ –Ω–∞ –±–∞–ª–∫–æ–Ω —Å —á–∞—à–∫–æ–π –∫–æ—Ñ–µ, –≤–¥–æ—Ö–Ω—É—Ç—å —ç—Ç–æ—Ç –≤–æ–∑–¥—É—Ö –ø–æ–ª–Ω–æ–π –≥—Ä—É–¥—å—é ‚Äî —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—É—á—à–µ?</p>
                        <p>–°–∞–¥ —É –≤–æ–¥—ã ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ –º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å –æ–±–æ –≤—Å–µ–º –∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –º–æ–º–µ–Ω—Ç–æ–º. –ö–Ω–∏–≥–∞ –≤ —Ä—É–∫–∞—Ö, –Ω–µ—Å–ø–µ—à–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –∏–ª–∏ –æ—Ç–¥—ã—Ö –≤ —à–µ–∑–ª–æ–Ω–≥–µ —Å –≤–∏–¥–æ–º –Ω–∞ –∑–µ—Ä–∫–∞–ª—å–Ω—É—é –≥–ª–∞–¥—å –æ–∑–µ—Ä–∞. –ó–¥–µ—Å—å –ø—Ä–∏—Ä–æ–¥–∞ –¥–∏–∫—Ç—É–µ—Ç —Å–≤–æ–π —Ä–∏—Ç–º –∂–∏–∑–Ω–∏, –ø–æ–∑–≤–æ–ª—è—è —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—É–µ—Ç—ã.</p>
                        <p>–•–æ—Ç–µ–ª–∏ –±—ã –≤—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ –∑–¥–µ—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –Ω–∞–µ–¥–∏–Ω–µ —Å –ø—Ä–∏—Ä–æ–¥–æ–π? üåø‚ú®</p>
                    </div>
                <?php endif;?>

                <!-- <div class="post__text post__text--full">
                    <p>
                        –ï—Å—Ç—å –º–µ—Å—Ç–∞, –≥–¥–µ –≤—Ä–µ–º—è —Å–ª–æ–≤–Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç —Å–≤–æ–π –±–µ–≥. –¢–µ—Ä—Ä–∞—Å–∞ —Å –ø–∞–Ω–æ—Ä–∞–º–Ω—ã–º –≤–∏–¥–æ–º –Ω–∞ –æ–∑–µ—Ä–æ, –≤—ã—Å–æ–∫–∏–µ –≥–æ—Ä—ã, –æ–∫—É—Ç–∞–Ω–Ω—ã–µ –ª–µ–≥–∫–æ–π –¥—ã–º–∫–æ–π, –∏ —É—Ç—Ä–µ–Ω–Ω–∏–π –≤–æ–∑–¥—É—Ö, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∞—Ä–æ–º–∞—Ç–∞–º–∏ –ø—Ä–∏—Ä–æ–¥—ã. –ó–¥–µ—Å—å –Ω–µ—Ç —Å—É–µ—Ç—ã, —Ç–æ–ª—å–∫–æ —Ç–∏—à–∏–Ω–∞, –ø–æ–∫–æ–π –∏ –æ—â—É—â–µ–Ω–∏–µ –≥–∞—Ä–º–æ–Ω–∏–∏.
                    </p>
                    <p>
                        –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –≤—ã –≤—ã—Ö–æ–¥–∏—Ç–µ –±–æ—Å–∏–∫–æ–º –Ω–∞ –ø—Ä–æ—Ö–ª–∞–¥–Ω—É—é –ø–ª–∏—Ç–∫—É, –∑–∞–≤–∞—Ä–∏–≤–∞–µ—Ç–µ —á–∞—à–∫—É —Å–≤–µ–∂–µ–≥–æ –∫–æ—Ñ–µ –∏ —Å–∞–¥–∏—Ç–µ—Å—å –≤ —à–µ–∑–ª–æ–Ω–≥, –Ω–∞—Å–ª–∞–∂–¥–∞—è—Å—å –Ω–µ—Å–ø–µ—à–Ω—ã–º –Ω–∞—á–∞–ª–æ–º –¥–Ω—è. –¢–∞–∫–æ–π –æ—Ç–¥—ã—Ö –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –ø—Ä–æ—Å—Ç—ã—Ö —Ä–∞–¥–æ—Å—Ç—è—Ö –∂–∏–∑–Ω–∏.
                    </p>
                    <p>
                        –ì–¥–µ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, —á—Ç–æ–±—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π –¥–∑–µ–Ω? üåø‚ú®
                    </p>

                    <h2>–î–æ–º —É –æ–∑–µ—Ä–∞ ‚Äî –º–µ—á—Ç–∞ –æ–± —É–µ–¥–∏–Ω–µ–Ω–∏–∏</h2>

                    <p>–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –≤—ã –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –≤ –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–º –¥–æ–º–µ —É —Å–∞–º–æ–≥–æ –æ–∑–µ—Ä–∞. –ó–∞ –æ–∫–Ω–æ–º —Ç–∏—à–∏–Ω–∞, —Ç–æ–ª—å–∫–æ –ª–µ–≥–∫–∏–µ –≤–æ–ª–Ω—ã –∫–∞—Å–∞—é—Ç—Å—è –±–µ—Ä–µ–≥–∞, –∞ –≤ –≤–æ–∑–¥—É—Ö–µ –≤–∏—Ç–∞–µ—Ç —Å–≤–µ–∂–µ—Å—Ç—å —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ª–µ—Å–∞. –í—ã–π—Ç–∏ –Ω–∞ –±–∞–ª–∫–æ–Ω —Å —á–∞—à–∫–æ–π –∫–æ—Ñ–µ, –≤–¥–æ—Ö–Ω—É—Ç—å —ç—Ç–æ—Ç –≤–æ–∑–¥—É—Ö –ø–æ–ª–Ω–æ–π –≥—Ä—É–¥—å—é ‚Äî —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—É—á—à–µ?</p>
                    <p>–°–∞–¥ —É –≤–æ–¥—ã ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ –º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å –æ–±–æ –≤—Å–µ–º –∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –º–æ–º–µ–Ω—Ç–æ–º. –ö–Ω–∏–≥–∞ –≤ —Ä—É–∫–∞—Ö, –Ω–µ—Å–ø–µ—à–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –∏–ª–∏ –æ—Ç–¥—ã—Ö –≤ —à–µ–∑–ª–æ–Ω–≥–µ —Å –≤–∏–¥–æ–º –Ω–∞ –∑–µ—Ä–∫–∞–ª—å–Ω—É—é –≥–ª–∞–¥—å –æ–∑–µ—Ä–∞. –ó–¥–µ—Å—å –ø—Ä–∏—Ä–æ–¥–∞ –¥–∏–∫—Ç—É–µ—Ç —Å–≤–æ–π —Ä–∏—Ç–º –∂–∏–∑–Ω–∏, –ø–æ–∑–≤–æ–ª—è—è —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—É–µ—Ç—ã.</p>
                    <p>–•–æ—Ç–µ–ª–∏ –±—ã –≤—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ –∑–¥–µ—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –Ω–∞–µ–¥–∏–Ω–µ —Å –ø—Ä–∏—Ä–æ–¥–æ–π? üåø‚ú®</p>
                </div> -->

                <div class="post__readmore">
                    <a href="<?=HOST?>">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                </div>

                 <!-- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É –ø–æ–∑–≤–æ–ª–µ–Ω–æ —É–¥–∞–ª—è—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å -->
                <?php if(is_admin()): ?>
                    <div class="post__buttons">
                        <a class="btn btn--secondary" href="<?=HOST?>/edit-post.php?id=<?=$post['id'] ?>">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                        <a class="btn btn--secondary" href="<?=HOST?>/delete-post.php?id=<?=$post['id'] ?>">–£–¥–∞–ª–∏—Ç—å</a>
                    </div>
                <?php endif;?>
            </article>
				
			</div>
		</div>
</main>

<?php
    include(ROOT . "templates/footer.tpl");
?>